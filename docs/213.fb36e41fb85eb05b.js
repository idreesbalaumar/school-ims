"use strict";(self.webpackChunkschool_ims=self.webpackChunkschool_ims||[]).push([[213],{84213:function(F,R,v){v.d(R,{g6:function(){return W},fi:function(){return Y}});var z=v(41885),k=v(69727),A=v(96860),M=v(75134),T=v(47289),B=v(88774),y=v.n(B),O=v(86019),t=v(19622),S=v(64762),L=v(35427),H=v(49133),I=[[["","quill-editor-toolbar",""]]],j=["[quill-editor-toolbar]"],x={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},q=function(d,r){return d||r||"html"},V=new t.OlP("config"),w=function(){var s=function(){function d(r){(0,M.Z)(this,d),this.config=r,this.count=0,this.config||(this.config={modules:x})}return(0,T.Z)(d,[{key:"getQuill",value:function(){var e=this;return this.count++,!this.Quill&&1===this.count&&(this.$importPromise=new Promise(function(n){return(0,S.mG)(e,void 0,void 0,y().mark(function o(){var c,f,i,a=this;return y().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,v.e(923).then(v.t.bind(v,2923,23));case 2:this.Quill=(i=u.sent).default?i.default:i,null===(c=this.config.customOptions)||void 0===c||c.forEach(function(l){var m=a.Quill.import(l.import);m.whitelist=l.whitelist,a.Quill.register(m,!0,a.config.suppressGlobalRegisterWarning)}),null===(f=this.config.customModules)||void 0===f||f.forEach(function(l){a.Quill.register(l.path,l.implementation,a.config.suppressGlobalRegisterWarning)}),n(this.Quill);case 7:case"end":return u.stop()}},o,this)}))})),this.$importPromise}}]),d}();return s.\u0275fac=function(r){return new(r||s)(t.LFG(V))},s.\u0275prov=t.Yz7({factory:function(){return new s(t.LFG(V))},token:s,providedIn:"root"}),s}(),U=function(){var s=function(){function d(r,e,n,o,a,c,f){var i=this;(0,M.Z)(this,d),this.elementRef=r,this.domSanitizer=e,this.doc=n,this.platformId=o,this.renderer=a,this.zone=c,this.service=f,this.required=!1,this.customToolbarPosition="top",this.sanitize=!1,this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.compareValues=!1,this.filterNull=!1,this.onEditorCreated=new t.vpe,this.onEditorChanged=new t.vpe,this.onContentChanged=new t.vpe,this.onSelectionChanged=new t.vpe,this.onFocus=new t.vpe,this.onBlur=new t.vpe,this.disabled=!1,this.debounceTimers=[],this.valueGetter=function(h,u){var l=u.querySelector(".ql-editor").innerHTML;("<p><br></p>"===l||"<div><br></div>"===l)&&(l=null);var m=l,g=q(i.format,i.service.config.format);if("text"===g)m=h.getText();else if("object"===g)m=h.getContents();else if("json"===g)try{m=JSON.stringify(h.getContents())}catch(C){m=h.getText()}return m},this.valueSetter=function(h,u){var l=q(i.format,i.service.config.format);if("html"===l)return i.sanitize&&(u=i.domSanitizer.sanitize(t.q3G.HTML,u)),h.clipboard.convert(u);if("json"===l)try{return JSON.parse(u)}catch(m){return[{insert:u}]}return u},this.selectionChangeHandler=function(h,u,l){var m=!h&&!!i.onModelTouched;!i.onBlur.observers.length&&!i.onFocus.observers.length&&!i.onSelectionChanged.observers.length&&!m||i.zone.run(function(){null===h?i.onBlur.emit({editor:i.quillEditor,source:l}):null===u&&i.onFocus.emit({editor:i.quillEditor,source:l}),i.onSelectionChanged.emit({editor:i.quillEditor,oldRange:u,range:h,source:l}),m&&i.onModelTouched()})},this.textChangeHandler=function(h,u,l){var m=i.quillEditor.getText(),g=i.quillEditor.getContents(),C=i.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===C||"<div><br></div>"===C)&&(C=null);var _=i.trackChanges||i.service.config.trackChanges,E=("user"===l||_&&"all"===_)&&!!i.onModelChange;!i.onContentChanged.observers.length&&!E||i.zone.run(function(){E&&i.onModelChange(i.valueGetter(i.quillEditor,i.editorElem)),i.onContentChanged.emit({content:g,delta:h,editor:i.quillEditor,html:C,oldDelta:u,source:l,text:m})})},this.editorChangeHandler=function(h,u,l,m){if(i.onEditorChanged.observers.length)if("text-change"===h){var g=i.quillEditor.getText(),C=i.quillEditor.getContents(),_=i.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===_||"<div><br></div>"===_)&&(_=null),i.zone.run(function(){i.onEditorChanged.emit({content:C,delta:u,editor:i.quillEditor,event:h,html:_,oldDelta:l,source:m,text:g})})}else i.onEditorChanged.emit({editor:i.quillEditor,event:h,oldRange:l,range:u,source:m})}}return(0,T.Z)(d,[{key:"ngAfterViewInit",value:function(){return(0,S.mG)(this,void 0,void 0,y().mark(function e(){var o,a,c,f,i,h,u,l,m,C,n=this;return y().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(0,O.PM)(this.platformId)){E.next=2;break}return E.abrupt("return");case 2:return E.next=4,this.service.getQuill();case 4:o=E.sent,this.elementRef.nativeElement.insertAdjacentHTML("top"===this.customToolbarPosition?"beforeend":"afterbegin",this.preserveWhitespace?"<pre quill-editor-element></pre>":"<div quill-editor-element></div>"),this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]"),a=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),c=Object.assign({},this.modules||this.service.config.modules),a?c.toolbar=a:void 0===c.toolbar&&(c.toolbar=x.toolbar),void 0===(f=void 0!==this.placeholder?this.placeholder:this.service.config.placeholder)&&(f="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(function(p){n.renderer.setStyle(n.editorElem,p,n.styles[p])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(function(p){var b=o.import(p.import);b.whitelist=p.whitelist,o.register(b,!0)}),this.customModules.forEach(function(p){o.register(p.path,p.implementation)}),(i=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds)||(i=this.service.config.bounds?this.service.config.bounds:this.doc.body),!(h=this.debug)&&!1!==h&&this.service.config.debug&&(h=this.service.config.debug),!(u=this.readOnly)&&!1!==this.readOnly&&(u=void 0!==this.service.config.readOnly&&this.service.config.readOnly),!(l=this.scrollingContainer)&&null!==this.scrollingContainer&&(l=null===this.service.config.scrollingContainer||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null),!(m=this.formats)&&void 0===m&&(m=this.service.config.formats?(0,A.Z)(this.service.config.formats):null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(function(){var p,b,D;if(n.quillEditor=new o(n.editorElem,{bounds:i,debug:h,formats:m,modules:c,placeholder:f,readOnly:u,scrollingContainer:l,strict:n.strict,theme:n.theme||(n.service.config.theme?n.service.config.theme:"snow")}),n.linkPlaceholder){var P=null===(b=null===(p=n.quillEditor)||void 0===p?void 0:p.theme)||void 0===b?void 0:b.tooltip,Q=null===(D=null==P?void 0:P.root)||void 0===D?void 0:D.querySelector("input[data-link]");(null==Q?void 0:Q.dataset)&&(Q.dataset.link=n.linkPlaceholder)}}),this.content&&("text"===q(this.format,this.service.config.format)?this.quillEditor.setText(this.content,"silent"):(C=this.valueSetter(this.quillEditor,this.content),this.quillEditor.setContents(C,"silent")),this.quillEditor.getModule("history").clear()),this.setDisabledState(),this.editorChangeHandlerRef=this.debounce(this.editorChangeHandler),this.quillEditor.on("editor-change",this.editorChangeHandlerRef),this.quillEditor.on("selection-change",this.selectionChangeHandler),this.textChangeHandlerRef=this.debounce(this.textChangeHandler),this.quillEditor.on("text-change",this.textChangeHandlerRef),setTimeout(function(){n.onValidatorChanged&&n.onValidatorChanged(),n.onEditorCreated.emit(n.quillEditor)});case 35:case"end":return E.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){var e=this;this.quillEditor&&(this.quillEditor.off("selection-change",this.selectionChangeHandler),this.quillEditor.off("text-change",this.textChangeHandlerRef),this.quillEditor.off("editor-change",this.editorChangeHandlerRef),this.debounceTimers.forEach(function(n){return e.clearDebounceTimer(n)}))}},{key:"ngOnChanges",value:function(e){var n=this;if(this.quillEditor){if(e.readOnly&&this.quillEditor.enable(!e.readOnly.currentValue),e.placeholder&&(this.quillEditor.root.dataset.placeholder=e.placeholder.currentValue),e.styles){var o=e.styles.currentValue,a=e.styles.previousValue;a&&Object.keys(a).forEach(function(i){n.renderer.removeStyle(n.editorElem,i)}),o&&Object.keys(o).forEach(function(i){n.renderer.setStyle(n.editorElem,i,n.styles[i])})}if(e.classes){var c=e.classes.currentValue,f=e.classes.previousValue;f&&this.removeClasses(f),c&&this.addClasses(c)}}}},{key:"addClasses",value:function(e){var n=this;d.normalizeClassNames(e).forEach(function(o){n.renderer.addClass(n.editorElem,o)})}},{key:"removeClasses",value:function(e){var n=this;d.normalizeClassNames(e).forEach(function(o){n.renderer.removeClass(n.editorElem,o)})}},{key:"writeValue",value:function(e){if((!this.filterNull||null!==e)&&(this.content=e,this.quillEditor)){var n=q(this.format,this.service.config.format),o=this.valueSetter(this.quillEditor,e);if(this.compareValues){var a=this.quillEditor.getContents();if(JSON.stringify(a)===JSON.stringify(o))return}if(e)return void("text"===n?this.quillEditor.setText(e):this.quillEditor.setContents(o));this.quillEditor.setText("")}}},{key:"setDisabledState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.disabled;this.disabled=e,this.quillEditor&&(e?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}},{key:"registerOnChange",value:function(e){this.onModelChange=e}},{key:"registerOnTouched",value:function(e){this.onModelTouched=e}},{key:"registerOnValidatorChange",value:function(e){this.onValidatorChanged=e}},{key:"validate",value:function(){if(!this.quillEditor)return null;var e={},n=!0,o=this.quillEditor.getText(),a=this.trimOnValidation?o.trim().length:1===o.length&&0===o.trim().length?0:o.length-1;return this.minLength&&a&&a<this.minLength&&(e.minLengthError={given:a,minLength:this.minLength},n=!1),this.maxLength&&a>this.maxLength&&(e.maxLengthError={given:a,maxLength:this.maxLength},n=!1),this.required&&!a&&(e.requiredError={empty:!0},n=!1),n?null:e}},{key:"debounce",value:function(e){var o,n=this;return function(){for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];"number"==typeof n.debounceTime?(n.clearDebounceTimer(o),o=n.doc.defaultView.setTimeout(function(){n.clearDebounceTimer(o),e.apply(void 0,c)},n.debounceTime),n.debounceTimers.push(o)):e.apply(void 0,c)}}},{key:"clearDebounceTimer",value:function(e){this.doc.defaultView.clearTimeout(e),this.debounceTimers=this.debounceTimers.filter(function(n){return n!==e})}}],[{key:"normalizeClassNames",value:function(e){return e.trim().split(" ").reduce(function(o,a){var c=a.trim();return c&&o.push(c),o},[])}}]),d}();return s.\u0275fac=function(r){return new(r||s)(t.Y36(t.SBq),t.Y36(L.H7),t.Y36(O.K0),t.Y36(t.Lbi),t.Y36(t.Qsj),t.Y36(t.R0b),t.Y36(w))},s.\u0275dir=t.lG2({type:s,inputs:{required:"required",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",styles:"styles",strict:"strict",customOptions:"customOptions",customModules:"customModules",preserveWhitespace:"preserveWhitespace",trimOnValidation:"trimOnValidation",compareValues:"compareValues",filterNull:"filterNull",valueGetter:"valueGetter",valueSetter:"valueSetter",format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",formats:"formats",scrollingContainer:"scrollingContainer",bounds:"bounds",trackChanges:"trackChanges",classes:"classes",linkPlaceholder:"linkPlaceholder",debounceTime:"debounceTime"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur"},features:[t.TTD]}),s}(),W=function(){var s=function(d){(0,z.Z)(e,d);var r=(0,k.Z)(e);function e(n,o,a,c,f,i,h){return(0,M.Z)(this,e),r.call(this,n,o,a,c,f,i,h)}return e}(U);return s.\u0275fac=function(r){return new(r||s)(t.Y36(t.SBq),t.Y36(L.H7),t.Y36(O.K0),t.Y36(t.Lbi),t.Y36(t.Qsj),t.Y36(t.R0b),t.Y36(w))},s.\u0275cmp=t.Xpm({type:s,selectors:[["quill-editor"]],features:[t._Bn([{multi:!0,provide:H.JU,useExisting:(0,t.Gpc)(function(){return s})},{multi:!0,provide:H.Cf,useExisting:(0,t.Gpc)(function(){return s})}]),t.qOj],ngContentSelectors:j,decls:1,vars:0,template:function(r,e){1&r&&(t.F$t(I),t.Hsn(0))},encapsulation:2}),s}(),Y=function(){var s=function(){function d(){(0,M.Z)(this,d)}return(0,T.Z)(d,null,[{key:"forRoot",value:function(e){return{ngModule:d,providers:[{provide:V,useValue:e}]}}}]),d}();return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[w],imports:[[O.ez]]}),s}()}}]);